<img src="assets/video/bg-survivors.gif" id="bg-video" alt="DBD Background" class="img-fluid v-flip"> @if (survivors && survivors.length > 0) {
<div class=" dbd-carousel-container " [class.detail-active]="isDetailView ">

    <!-- CARRUSEL -->
    <div class="arc-viewport " [class.shifted]="isDetailView ">
        @for (item of visibleSurvivors; track item.data.code) {
        <div class="survivor-item " [ngStyle]="getTransform(item.position) " [class.is-center]="item.position===0 " [class.is-selected]="isDetailView && item.position===0 " (click)="item.position===0 && !isDetailView ? openDetail(item.data) : rotate(item.position) ">

            <div class="portrait-wrapper shadow ">
                <img [src]="item.data.imgs.store " class="img-fluid " [alt]="item.data.name ">
            </div>

            @if (item.position === 0 && !isDetailView) {
            <div class="survivor-info text-center mt-2 ">
                <h5 class="text-white text-uppercase mb-0 fw-bold ">{{ item.data.name }}</h5>
                <small class="text-secondary ">{{ item.data.role }}</small>
            </div>
            }
        </div>
        }
    </div>

    <!-- NAVEGACIÃ“N -->
    <div class="navigation " [class.hidden]="isDetailView ">
        <button class="btn btn-outline-light btn-sm " (click)="rotate(1) ">&#10094;</button>
        <button class="btn btn-outline-light btn-sm " (click)="rotate(-1) ">&#10095;</button>
    </div>

    <!-- OVERLAY OSCURO -->
    @if (isDetailView) {
    <div class="detail-overlay " (click)="closeDetail() "></div>
    }

    <!-- VENTANA FLOTANTE DE DETALLES -->
    @if (selectedSurvivor) {
    <div class="detail-modal " [class.active]="isDetailView ">
        <div class="modal-header ">
            <div class="survivor-title ">
                <h2 class="text-white text-uppercase mb-1 ">{{ selectedSurvivor.name }}</h2>
                <p class="text-secondary mb-2 ">{{ selectedSurvivor.role }}</p>
                <div class="survivor-badges ">
                    <span class="badge-custom bg-danger ">{{ selectedSurvivor.difficulty }}</span>
                    <span class="badge-custom bg-secondary ">{{ selectedSurvivor.nationality }}</span> @if (selectedSurvivor.licensed) {
                    <span class="badge-custom bg-warning ">De licencia</span> }
                </div>
            </div>
            <button class="btn-close-modal " (click)="closeDetail() ">
        <span>&times;</span>
      </button>
        </div>

        <div class="modal-body ">

            <!-- RESUMEN -->
            @if (selectedSurvivor.overview) {
            <div class="info-section ">
                <h5 class="section-title ">
                    <span class="title-icon ">ðŸ“–</span> Resumen
                </h5>
                <p class="section-content ">{{ selectedSurvivor.overview }}</p>
            </div>
            }

            <!-- PERKS -->
            <div class="info-section ">
                <h5 class="section-title ">
                    <span class="title-icon ">âš¡</span> Ventajas Ãšnicas
                </h5>

                @if (isLoadingPerks) {
                <div class="loading-perks ">
                    <div class="spinner-border spinner-border-sm text-danger " role="status "></div>
                    <span class="text-white-50 ms-2 ">Cargando ventajas...</span>
                </div>
                } @else if (survivorPerks && survivorPerks.length > 0) {
                <div class="perks-container ">
                    @for (perk of survivorPerks; track perk.id) {
                    <div class="perk-box ">
                        <div class="perk-image ">
                            <img [src]="perk.icon " [alt]="perk.name ">
                        </div>
                        <div class="perk-details ">
                            <h6 class="perk-name ">{{ perk.name }}</h6>
                            <p class="perk-description ">{{ perk.description }}</p>
                        </div>
                    </div>
                    }
                </div>
                } @else {
                <p class="text-white-50 ">No hay ventajas disponibles</p>
                }
            </div>

        </div>
    </div>
    }

</div>
}
