<img src="assets/video/bg-survivors.gif" id="bg-video" alt="DBD Background"> @if (killers && killers.length > 0) {
<div class="dbd-carousel-container" [class.detail-active]="isDetailView">

    <!-- CARRUSEL -->
    <div class="arc-viewport" [class.shifted]="isDetailView">
        @for (item of visibleKillers; track item.data.code) {
        <div class="killer-item" [ngStyle]="getTransform(item.position)" [class.is-center]="item.position === 0" [class.is-selected]="isDetailView && item.position === 0" (click)="item.position === 0 && !isDetailView ? openDetail(item.data) : rotate(item.position)">

            <div class="portrait-wrapper shadow">
                <img [src]="item.data.imgs.store" class="img-fluid" [alt]="item.data.name">
            </div>

            @if (item.position === 0 && !isDetailView) {
            <div class="killer-info text-center mt-2">
                <h5 class="text-white text-uppercase mb-0 fw-bold">{{ item.data.name }}</h5>
                <small class="text-secondary">{{ item.data.power.powerName }}</small>
            </div>
            }
        </div>
        }
    </div>

    <!-- NAVEGACI√ìN -->
    <div class="navigation" [class.hidden]="isDetailView">
        <button class="btn btn-outline-light btn-sm" (click)="rotate(1)">&#10094;</button>
        <button class="btn btn-outline-light btn-sm" (click)="rotate(-1)">&#10095;</button>
    </div>

    <!-- OVERLAY OSCURO -->
    @if (isDetailView) {
    <div class="detail-overlay" (click)="closeDetail()"></div>
    }

    <!-- VENTANA FLOTANTE DE DETALLES -->
    @if (selectedKiller) {
    <div class="detail-modal" [class.active]="isDetailView">
        <div class="modal-header">
            <div class="killer-title">
                <h2 class="text-white text-uppercase mb-1">{{ selectedKiller.name }}</h2>
                <p class="text-secondary mb-1"><strong>{{ selectedKiller.fullName }}</strong></p>
                <p class="text-secondary mb-2">{{ selectedKiller.power.powerName }}</p>
                <div class="killer-badges">
                    <span class="badge-custom bg-danger">{{ selectedKiller.difficulty }}</span>
                    <span class="badge-custom bg-secondary">{{ selectedKiller.nationality }}</span> @if (selectedKiller.licensed) {
                    <span class="badge-custom bg-warning">De licencia</span> }
                </div>
            </div>
            <button class="btn-close-modal" (click)="closeDetail()">
        <span>&times;</span>
      </button>
        </div>

        <div class="modal-body">

            <!-- RESUMEN -->
            @if (selectedKiller.overview) {
            <div class="info-section">
                <h5 class="section-title">
                    <span class="title-icon">üìñ</span> Resumen
                </h5>
                <p class="section-content">{{ selectedKiller.overview }}</p>
            </div>
            }

            <!-- CARACTER√çSTICAS DEL KILLER -->
            <div class="info-section">
                <h5 class="section-title">
                    <span class="title-icon">‚öîÔ∏è</span> Caracter√≠sticas
                </h5>
                <div class="characteristics-grid">
                    <div class="characteristic-item">
                        <span class="char-label">Arma:</span>
                        <span class="char-value">{{ selectedKiller.weapon }}</span>
                    </div>
                    <div class="characteristic-item">
                        <span class="char-label">Velocidad:</span>
                        <span class="char-value">{{ selectedKiller.moveSpeed }}</span>
                    </div>
                    <div class="characteristic-item">
                        <span class="char-label">Radio de Terror:</span>
                        <span class="char-value">{{ selectedKiller.terrorRadius }}</span>
                    </div>
                    <div class="characteristic-item">
                        <span class="char-label">Altura:</span>
                        <span class="char-value">{{ selectedKiller.height }}</span>
                    </div>
                    <div class="characteristic-item">
                        <span class="char-label">Tipo de Ataque:</span>
                        <span class="char-value">{{ selectedKiller.powerAttackType }}</span>
                    </div>
                    <div class="characteristic-item">
                        <span class="char-label">Reino:</span>
                        <span class="char-value">{{ selectedKiller.realm }}</span>
                    </div>
                </div>
            </div>

            <!-- PERKS -->
            <div class="info-section">
                <h5 class="section-title">
                    <span class="title-icon">‚ö°</span> Ventajas √önicas
                </h5>

                @if (isLoadingPerks) {
                <div class="loading-perks">
                    <div class="spinner-border spinner-border-sm text-danger" role="status"></div>
                    <span class="text-white-50 ms-2">Cargando ventajas...</span>
                </div>
                } @else if (killerPerks && killerPerks.length > 0) {
                <div class="perks-container">
                    @for (perk of killerPerks; track perk.id) {
                    <div class="perk-box">
                        <div class="perk-image">
                            <img [src]="perk.icon" [alt]="perk.name">
                        </div>
                        <div class="perk-details">
                            <h6 class="perk-name">{{ perk.name }}</h6>
                            <p class="perk-description">{{ perk.description }}</p>
                        </div>
                    </div>
                    }
                </div>
                } @else {
                <p class="text-white-50">No hay ventajas disponibles</p>
                }
            </div>

        </div>
    </div>
    }

</div>
}
